<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 시안 확인 도구</title>
    
    <link rel="icon" type="image/svg+xml" href='data:image/svg+xml,<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_81_5394)"><rect width="96" height="96" rx="23.04" fill="%234B5563"/><circle cx="60.672" cy="69.3126" r="7.296" fill="white"/><path d="M60.6711 52.2538C60.6727 48.9653 60.6711 44.4879 60.6711 41.1994H39.5838C38.9115 41.1994 38.7235 41.0374 38.7325 40.6197C38.7563 39.5091 38.9096 38.7961 39.2562 37.7383C40.2149 34.8061 42.1719 32.7544 44.854 31.3498C45.7577 30.8766 46.3247 30.6924 46.9403 30.5417C47.5368 30.3957 48.1774 30.2761 49.3102 30.2761L60.6711 30.276V19.3926L49.5805 19.3926C47.017 19.4569 46.7602 19.5064 45.4154 19.7657L45.3611 19.7761C40.5026 20.7157 36.296 22.8537 33.0559 26.6759C29.7268 30.6068 27.9049 35.1816 27.8763 40.3445C27.8095 52.2602 27.8572 64.6929 27.8461 76.6086H39.0448V52.7987C39.0448 52.4354 39.2244 52.2538 39.5837 52.2538H60.6711Z" fill="white"/></g><defs><clipPath id="clip0_81_5394"><rect width="96" height="96" rx="23.04" fill="white"/></clipPath></defs></svg>'>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Pretendard', '-apple-system', 'BlinkMacSystemFont', 'system-ui', 'Roboto', 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563eb',
                    }
                }
            }
        }
    </script>
    <style>
        body { 
            font-family: 'Pretendard', sans-serif;
            font-feature-settings: "ss05"; 
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-slate-900 flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-7xl bg-white border border-gray-200 rounded-xl shadow-sm dark:bg-gray-800 dark:border-gray-700 flex flex-col md:flex-row overflow-hidden h-[90vh]">
        
        <div id="control-panel" class="w-full md:w-80 flex-shrink-0 border-r border-gray-200 dark:border-gray-700 flex flex-col bg-white dark:bg-gray-800 z-10">
            
            <div class="p-6 flex-1">
                
                <div class="mb-8">
                    <h1 class="text-xl font-bold text-gray-800 dark:text-white">상품 시안 확인 도구</h1>
                    <p class="mt-1 text-xs text-gray-500">ID 입력 후 미리보기 또는 캡처 모드를 실행하세요.</p>
                </div>

                <div class="space-y-6">
                    
                    <div id="input-group" class="flex flex-col gap-2">
                        
                        <div class="flex justify-between px-1">
                            <label for="suffix-val" class="block text-sm font-medium dark:text-white">시안 ID</label>
                            
                            <button type="button" onclick="resetUI()" 
                                class="text-xs text-gray-500 hover:text-blue-600 flex items-center gap-1 transition-colors" 
                                title="입력값 및 화면 초기화">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                                초기화
                            </button>
                        </div>

                        <input type="text" id="suffix-val" 
                            class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400" 
                            placeholder="값 입력" autocomplete="off" autofocus>
                    </div>

                    <div id="action-buttons" class="flex flex-col gap-3">
                        <button type="button" onclick="loadIframe()" 
                            class="w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 transition-all">
                            미리보기 로드
                        </button>
                        
                        <button type="button" onclick="openCleanWindow()" 
                            class="w-full py-3 px-4 inline-flex justify-center items-center gap-x-1 text-sm font-semibold rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 transition-all">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                            캡쳐 모드 실행
                        </button>
                    </div>

                </div>
            </div>
            
            <div class="bg-gray-50 p-4 dark:bg-white/5 border-t border-gray-200 dark:border-gray-700">
                <p class="text-[11px] text-gray-500">
                    <span class="font-bold">Tip:</span> 초기화 버튼을 누르면 입력값과 화면이 모두 지워집니다.
                </p>
            </div>
        </div>

        <div id="viewer-panel" class="flex-1 bg-gray-100 dark:bg-black relative">
            
            <iframe id="preview-frame" class="w-full h-full border-none" src="about:blank"></iframe>
            
            <div id="empty-state" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400 pointer-events-none bg-gray-100 dark:bg-gray-900 z-10">
                <svg class="w-12 h-12 mb-2 opacity-20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                <span class="text-sm">ID 입력 후 미리보기를 로드하세요</span>
            </div>
        </div>

    </div>

    <script>
        const FIXED_BASE_URL = "https://app.apthefin.com/app/loan-product-preview?id="; 
        
        // --- Functions ---
        
        function resetUI() {
            const input = document.getElementById('suffix-val');
            const frame = document.getElementById('preview-frame');
            
            input.value = "";
            frame.src = "about:blank";
            document.getElementById('empty-state').style.display = 'flex';
            input.focus();
        }

        function getFullUrl() {
            const suffix = document.getElementById('suffix-val').value.trim();
            if (!suffix) {
                alert("시안 ID를 입력해주세요.");
                document.getElementById('suffix-val').focus();
                return null;
            }
            return FIXED_BASE_URL + suffix;
        }

        function loadIframe() {
            const url = getFullUrl();
            if (url) {
                document.getElementById('empty-state').style.display = 'none';
                document.getElementById('preview-frame').src = url;
            }
        }

        function openCleanWindow() {
            const url = getFullUrl();
            if (!url) return;
            
            const width = 420;
            const height = 900;
            const left = (screen.width - width) / 2;
            const top = (screen.height - height) / 2;
            
            window.open(url, '_blank', `width=${width},height=${height},top=${top},left=${left},resizable=yes,scrollbars=yes,status=no,toolbar=no,menubar=no,location=no`);
        }

        // --- Event Listeners ---
        
        window.onload = resetUI;
        
        document.getElementById('suffix-val').addEventListener("keypress", function(e) {
            if (e.key === "Enter") loadIframe();
        });
    </script>
</body>
</html>
